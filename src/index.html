<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,
    minimum-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
    <title>皮卡丘</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div>
        <audio id="player" controls="controls" style="display:none;">
            <source src="./mp3/pika.mp3" />
        </audio>
    </div>
    <div class="notes">不要摸我的鼻子,可以摸我的脸</div>
    <div class="header">

        <div class="eye left"></div>
        <div class="eye right"></div>
        <div class="nose">
            <div class="nose-up"></div>
        </div>

        <div class="mouth">
            <div class="mouth-up">
                <div class="lip-left"></div>
                <div class="lip-right"></div>
            </div>
            <div class="mouth-down">
                <div class="tongue1">
                    <div class="tongue2"></div>
                </div>
            </div>
        </div>
        <div class="face-left" onclick="callSound()"></div>
        <div class="face-right" onclick="callSound()"></div>
    </div>
    <script>
        document.addEventListener("mousemove", eyeMove)

        function eyeMove() {
            let eye = document.querySelectorAll('.eye');
            // 调用数组中的每个元素
            eye.forEach(function (eye) {
                // Element.getBoundingClientRect() 方法返回元素的大小及其相对于视口的位置
                // 元素相对于窗口左边的距离  左边框的宽度
                let x = (eye.getBoundingClientRect().left + (eye.clientLeft / 2));
                let y = (eye.getBoundingClientRect().top + (eye.clientTop / 2));
                // pageX 鼠标指针的位置，相对于文档左边缘
                // Math.atan2() 返回从原点(0,0)即左上角到(x,y)点的线段与x轴正方向之间的平面角度(弧度值)，也就是Math.atan2(y,x)
                let radian = Math.atan2(event.pageX - x, event.pageY - y);
                let rot = (radian * (180 / Math.PI) * -1) + 270;
                // 修改旋转角度
                eye.style.transform = 'rotate(' + rot + 'deg)';
            })
        }

        function callSound() {
            let player = document.querySelector('#player');
            let mouth = document.querySelector(".mouth-down");
            console.log(".mouth-down");
            console.log(mouth);
            mouth.style.animation = "move-mouth 3s infinite";
            player.play();
        }
    </script>

</body>

</html>